<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="d3.v4.min.js"></script>
    <title>7. Key function</title>

    <style>
        body
        {
            background-color:   rgb(51, 51, 51);
        }

        .container
        {
            background-color:   #ccc;
            fill:               fuchsia;
        }
    </style>

</head>


<body>
    <div>
        <svg width="720" height="120" class="container" onclick="updateData()">
            <circle cx="40"     cy="60"     r="30"  id="a"></circle>
            <circle cx="120"    cy="60"     r="30"  id="b"></circle>
            <circle cx="200"    cy="60"     r="30"  id="c"></circle>
        </svg>
    </div>

    <script>

        const data  =   [
                            {
                                key: "a",
                                color: "blue"
                            },
                            {
                                key: "b",
                                color: "white"
                            },
                            {
                                key: "c",
                                color: "red"
                            }
                        ];                  

        d3  .selectAll("circle")
            .data(data)
            .style("fill", (d, i) => d.color);

            

        const updateData =  () =>
                            {
                                const newData = [
                                                    {
                                                        key: "a",
                                                        color: "fuchsia"
                                                    },
                                                    {
                                                        key: "c",
                                                        color: "fuchsia"
                                                    },
                                                    {
                                                        key: "d",
                                                        color: "fuchsia"
                                                    }
                                                ];

                                    d3  .selectAll("circle")
                                        // .data(newData)
                                        .data(newData, (d) => d.key)
                                        .style("fill", (d, i) => d.color);
                            };


    </script>
</body>

</html>
